<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyBoard.js - 가상 키보드 라이브러리 데모</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .demo-section h3 {
            margin-top: 0;
            color: #007bff;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background: #007bff;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .keyboard-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }
        
        input[type="text"] {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .color-input {
            width: 50px;
            height: 35px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .info-box {
            background: #e3f2fd;
            border: 1px solid #bbdefb;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .info-box h4 {
            margin-top: 0;
            color: #1976d2;
        }
        
        code {
            background: #f1f1f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        .method-example {
            background: #263238;
            color: #ffffff;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        /* 추가 코드 스타일링 */
        .info-box pre {
            margin: 0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .info-box h4 {
            margin-bottom: 15px;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .info-box {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .info-box h4 {
            color: white;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .info-box .method-example {
            background: white;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .method-example {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 0;
            margin: 0;
            overflow-x: auto;
        }
        
        .method-example code {
            display: block;
            padding: 20px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            color: #333;
            background: transparent;
            border: none;
            white-space: pre;
            overflow-x: auto;
            
            /* 신택스 하이라이팅 */
            --comment-color: #6a737d;
            --string-color: #032f62;
            --keyword-color: #d73a49;
            --function-color: #6f42c1;
        }
        
        /* 간단한 신택스 하이라이팅 */
        .method-example code::selection {
            background: #b3d4fc;
        }
        
        /* 모달 스타일 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            padding: 20px;
            transform: scale(0.7);
            transition: transform 0.3s ease;
            max-width: 95vw;
            max-height: 95vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .modal-overlay.active .modal-container {
            transform: scale(1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .modal-title {
            margin: 0;
            color: #333;
            font-size: 20px;
        }
        
        .modal-close {
            background: #f44336;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }
        
        .modal-close:hover {
            background: #d32f2f;
        }
        
        .modal-content {
            flex: 1;
            overflow: auto;
        }
        
        .modal-keyboard-container {
            width: 100%;
            height: 100%;
        }
        
        /* 모달 크기별 스타일 */
        .modal-small .modal-container {
            width: 300px;
            height: 250px;
        }
        
        .modal-large .modal-container {
            width: 800px;
            height: 600px;
        }
        
        .modal-half-screen .modal-container {
            width: 40vw;
            height: 85vh;
        }
        
        .modal-full-screen .modal-container {
            width: 95vw;
            height: 95vh;
        }
        
        .modal-info {
            text-align: center;
            color: #666;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        /* 타일 아트 멀틴 패널 모달 스타일 */
        .modal-tile-art .modal-container {
            width: 95vw;
            height: 90vh;
            max-width: 1400px;
        }
        
        .tile-art-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-template-rows: repeat(8, minmax(120px, 1fr));
            gap: 8px;
            height: 100%;
            padding: 12px;
            overflow-y: auto;
        }
        
        .keyboard-panel {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: linear-gradient(135deg, #f9f9f9 0%, #f1f1f1 100%);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 100px;
            display: flex;
            flex-direction: column;
        }
        
        .keyboard-panel:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .keyboard-panel::before {
            content: attr(data-label);
            position: absolute;
            top: 8px;
            left: 12px;
            font-size: 11px;
            color: #555;
            font-weight: bold;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            padding: 4px 8px;
            border-radius: 12px;
            border: 1px solid #ddd;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* 타일 아트 패널 크기 정의 */
        .keyboard-panel.tiny {
            grid-column: span 1;
            grid-row: span 1;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
        }
        
        .keyboard-panel.small {
            grid-column: span 1;
            grid-row: span 2;
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        }
        
        .keyboard-panel.medium {
            grid-column: span 2;
            grid-row: span 1;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }
        
        .keyboard-panel.wide {
            grid-column: span 3;
            grid-row: span 1;
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        }
        
        .keyboard-panel.tall {
            grid-column: span 1;
            grid-row: span 3;
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
        }
        
        .keyboard-panel.large {
            grid-column: span 2;
            grid-row: span 2;
            background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
        }
        
        .keyboard-panel.xlarge {
            grid-column: span 3;
            grid-row: span 2;
            background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%);
        }
        
        .keyboard-panel.mega {
            grid-column: span 2;
            grid-row: span 3;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
        }
        
        .keyboard-panel.tower {
            grid-column: span 1;
            grid-row: span 4;
            background: linear-gradient(135deg, #fafafa 0%, #e0e0e0 100%);
        }
        
        .keyboard-panel.banner {
            grid-column: span 4;
            grid-row: span 1;
            background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%);
        }
        
        /* 추가 패널 크기 클래스 - 시각적 차이 개선 */
        .keyboard-panel.micro {
            grid-column: span 1;
            grid-row: span 1;
            background: linear-gradient(135deg, #fff9e6 0%, #ffecb3 100%);
            min-height: 60px;
        }
        
        .keyboard-panel.nano {
            grid-column: span 2;
            grid-row: span 1;
            background: linear-gradient(135deg, #f0f4c3 0%, #dce775 100%);
            min-height: 50px;
        }
        
        .keyboard-panel.compact {
            grid-column: span 1;
            grid-row: span 2;
            background: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
        }
        
        .keyboard-panel.standard {
            grid-column: span 3;
            grid-row: span 1;
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
            min-height: 140px;
        }
        
        /* 극단적인 variation 패널들 - 키보드 렌더링 테스트용 */
        .keyboard-panel.ultra-wide {
            grid-column: span 5;
            grid-row: span 1;
            background: linear-gradient(135deg, #ff8a80 0%, #ff5722 100%);
            min-height: 140px;
        }
        
        .keyboard-panel.super-wide {
            grid-column: span 6;
            grid-row: span 1;
            background: linear-gradient(135deg, #80cbc4 0%, #009688 100%);
            min-height: 140px;
        }
        
        .keyboard-panel.ultra-tall {
            grid-column: span 1;
            grid-row: span 5;
            background: linear-gradient(135deg, #ce93d8 0%, #9c27b0 100%);
        }
        
        .keyboard-panel.skyscraper {
            grid-column: span 1;
            grid-row: span 6;
            background: linear-gradient(135deg, #90caf9 0%, #2196f3 100%);
        }
        
        .keyboard-panel.square-large {
            grid-column: span 3;
            grid-row: span 3;
            background: linear-gradient(135deg, #a5d6a7 0%, #4caf50 100%);
        }
        
        .keyboard-panel.square-huge {
            grid-column: span 4;
            grid-row: span 4;
            background: linear-gradient(135deg, #ffab91 0%, #ff5722 100%);
        }
        
        .keyboard-panel.rectangle-wide {
            grid-column: span 4;
            grid-row: span 2;
            background: linear-gradient(135deg, #f8bbd9 0%, #e91e63 100%);
        }
        
        .keyboard-panel.rectangle-tall {
            grid-column: span 2;
            grid-row: span 4;
            background: linear-gradient(135deg, #b39ddb 0%, #673ab7 100%);
        }
        
        .keyboard-panel.ultra-thin {
            grid-column: span 1;
            grid-row: span 7;
            background: linear-gradient(135deg, #ffcc02 0%, #ff9800 100%);
        }
        
        .keyboard-panel.ribbon {
            grid-column: span 7;
            grid-row: span 1;
            background: linear-gradient(135deg, #81c784 0%, #388e3c 100%);
            min-height: 140px;
        }
        
        .keyboard-panel.needle {
            grid-column: span 1;
            grid-row: span 8;
            background: linear-gradient(135deg, #64b5f6 0%, #1976d2 100%);
        }
        
        .keyboard-panel.giant {
            grid-column: span 6;
            grid-row: span 3;
            background: linear-gradient(135deg, #dce775 0%, #689f38 100%);
        }
        
        .keyboard-panel.panorama {
            grid-column: span 8;
            grid-row: span 1;
            background: linear-gradient(135deg, #f06292 0%, #c2185b 100%);
        }
        
        .keyboard-panel.pillar {
            grid-column: span 2;
            grid-row: span 5;
            background: linear-gradient(135deg, #4db6ac 0%, #00695c 100%);
        }
        
        .keyboard-panel.postcard {
            grid-column: span 4;
            grid-row: span 2;
            background: linear-gradient(135deg, #aed581 0%, #558b2f 100%);
        }
        
        .keyboard-panel.stamp {
            grid-column: span 2;
            grid-row: span 2;
            background: linear-gradient(135deg, #ffb74d 0%, #e65100 100%);
            min-height: 40px;
        }
        
        .keyboard-panel.banner-thin {
            grid-column: span 4;
            grid-row: span 1;
            background: linear-gradient(135deg, #ba68c8 0%, #7b1fa2 100%);
            min-height: 35px;
        }
        
        /* 초대형 패널들 - 12x8 그리드 최대 활용 */
        .keyboard-panel.massive {
            grid-column: span 12;
            grid-row: span 8;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff3838 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.ultra-wide-max {
            grid-column: span 12;
            grid-row: span 4;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            min-height: 500px;
        }
        
        .keyboard-panel.ultra-tall-max {
            grid-column: span 6;
            grid-row: span 8;
            background: linear-gradient(135deg, #a8e6cf 0%, #7fcdcd 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.mega-square {
            grid-column: span 8;
            grid-row: span 8;
            background: linear-gradient(135deg, #ffd93d 0%, #ff6b35 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.wide-banner {
            grid-column: span 12;
            grid-row: span 3;
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            min-height: 500px;
        }
        
        .keyboard-panel.tall-banner {
            grid-column: span 5;
            grid-row: span 8;
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.super-square {
            grid-column: span 6;
            grid-row: span 6;
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            min-height: 480px;
        }
        
        .keyboard-panel.wide-rect {
            grid-column: span 10;
            grid-row: span 5;
            background: linear-gradient(135deg, #e17055 0%, #fab1a0 100%);
            min-height: 500px;
        }
        
        .keyboard-panel.tall-rect {
            grid-column: span 4;
            grid-row: span 8;
            background: linear-gradient(135deg, #0984e3 0%, #74b9ff 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.huge-wide {
            grid-column: span 12;
            grid-row: span 2;
            background: linear-gradient(135deg, #00b894 0%, #55efc4 100%);
            min-height: 500px;
        }
        
        .keyboard-panel.huge-tall {
            grid-column: span 3;
            grid-row: span 8;
            background: linear-gradient(135deg, #e84393 0%, #fd79a8 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.mega-wide {
            grid-column: span 12;
            grid-row: span 1;
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            min-height: 140px;
        }
        
        .keyboard-panel.colossal {
            grid-column: span 10;
            grid-row: span 8;
            background: linear-gradient(135deg, #fd63a3 0%, #fc3a52 100%);
            min-height: 600px;
        }
        
        .keyboard-panel.enormous {
            grid-column: span 8;
            grid-row: span 6;
            background: linear-gradient(135deg, #778beb 0%, #546de5 100%);
            min-height: 480px;
        }
        
        .keyboard-panel.gigantic {
            grid-column: span 9;
            grid-row: span 7;
            background: linear-gradient(135deg, #f8b500 0%, #feca57 100%);
            min-height: 560px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎹 KeyBoard.js</h1>
        <p class="subtitle">가상 키보드 라이브러리 - 웹에서 키보드를 시각적으로 표현하세요!</p>
        
        <!-- 키보드가 렌더링될 영역 -->
        <div class="keyboard-container">
            <div id="keyboard-area" style="width:600px"></div>
        </div>
        
        <!-- 컨테이너 구성 가이드 섹션 -->
        <div class="demo-section">
            <h3>📦 컨테이너 구성 가이드</h3>
            <div class="info-box">
                <h4>⚠️ 중요: 컨테이너 크기 설정 가이드</h4>
                <p><strong>keyboard.js</strong>는 컨테이너 크기에 따라 자동으로 키보드 크기를 조정합니다. 올바른 렌더링을 위해 다음 가이드를 따라주세요:</p>
                
                <h5>🔸 최소 높이 요구사항:</h5>
                <ul>
                    <li><strong>일반 비율 컨테이너</strong>: 최소 <code>300px</code> 높이 권장</li>
                    <li><strong>가로가 긴 컨테이너</strong> (width:height > 3:1): 최소 <code>480~500px</code> 높이 <strong>필수</strong></li>
                    <li><strong>매우 가로가 긴 배너형</strong> (width:height > 5:1): 최소 <code>500px</code> 높이 <strong>필수</strong></li>
                </ul>
                
                <h5>🔸 크기 조정 원리:</h5>
                <ul>
                    <li><strong>가로 기준</strong>: 컨테이너가 정사각형에 가까우면 가로 크기에 맞춰 조정</li>
                    <li><strong>세로 기준</strong>: 컨테이너가 매우 가로로 길면 세로 크기에 맞춰 조정</li>
                    <li><strong>키보드는 총 6행</strong>이므로 높이가 부족하면 아래쪽이 잘림</li>
                </ul>
                
                <h5>🔸 CSS 예시:</h5>
                <pre><code>/* ✅ 올바른 설정 */
.keyboard-container {
    width: 600px;
    min-height: 300px;  /* 일반 비율 */
}

.banner-container {
    width: 1000px;
    min-height: 500px;  /* 가로가 긴 배너형 */
}

/* ❌ 잘못된 설정 */
.bad-container {
    width: 800px;
    height: 150px;  /* 너무 낮음 - 키보드 잘림! */
}</code></pre>
            </div>
        </div>
        
        <!-- 데모 섹션 1: 기본 기능 -->
        <div class="demo-section">
            <h3>🎨 키 색상 변경 (mark)</h3>
            <p>특정 키에 색상을 적용할 수 있습니다.</p>
            <div class="controls">
                <input type="text" id="markKey" placeholder="키 입력 (예: a, enter, f1)" value="a">
                <input type="color" id="markColor" class="color-input" value="#ff6b6b">
                <button onclick="markDemo()">키 색상 변경</button>
                <button onclick="clearMarks()">색상 초기화</button>
            </div>
            <div class="method-example">
kb.mark('a', '#ff6b6b');  // 'a' 키를 빨간색으로 표시
            </div>
        </div>
        
        <!-- 데모 섹션 2: 키 누름 효과 -->
        <div class="demo-section">
            <h3>⚡ 키 누름 효과 (press)</h3>
            <p>키를 누른 듯한 시각적 효과를 줄 수 있습니다.</p>
            <div class="controls">
                <input type="text" id="pressKey" placeholder="키 입력 (예: space, ctrl)" value="space">
                <input type="number" id="pressDelay" placeholder="지속시간(ms)" value="500" min="100" max="2000">
                <button onclick="pressDemo()">키 누름 효과</button>
            </div>
            <div class="method-example">
kb.press('space', 500);  // 스페이스 키를 500ms 동안 누름 효과
            </div>
        </div>
        
        <!-- 데모 섹션 3: 키 시퀀스 -->
        <div class="demo-section">
            <h3>🎬 키 시퀀스 효과 (flow)</h3>
            <p>여러 키를 순서대로 누르는 효과를 만들 수 있습니다.</p>
            <div class="controls">
                <input type="text" id="flowKeys" placeholder="키 순서 (쉼표로 구분)" value="h,e,l,l,o">
                <input type="number" id="flowDelay" placeholder="간격(ms)" value="300" min="100" max="1000">
                <button onclick="flowDemo()">시퀀스 실행</button>
                <button onclick="flowPresetDemo('hello')">HELLO 입력</button>
                <button onclick="flowPresetDemo('keyboard')">KEYBOARD 입력</button>
            </div>
            <div class="method-example">
kb.flow(['h','e','l','l','o'], { delay: 300, pressDelay: 200 });
            </div>
        </div>
        
        <!-- 새로운 press/unpress 기능 데모 -->
        <div class="demo-section">
            <h3>🎮 키 상태 제어 (press/unpress/click)</h3>
            <p>새로운 API로 키를 누른 상태로 유지하거나 해제할 수 있습니다!</p>
            <div class="controls">
                <input type="text" id="stateKey" placeholder="키 입력 (예: shift, ctrl, space)" value="shift">
                <button onclick="pressStateDemo()">🔒 누른 상태로 유지 (press)</button>
                <button onclick="unpressStateDemo()">🔓 누름 해제 (unpress)</button>
                <button onclick="clickStateDemo()">👆 일반 클릭 (click)</button>
                <button onclick="toggleStateDemo()">🔄 상태 토글</button>
            </div>
            <div class="method-example">
// 새로운 키 상태 제어 API
kb.press('shift');    // 누른 상태로 유지
kb.unpress('shift');  // 누름 해제 
kb.click('space');    // 누르고 떠기 (기존 press 동작)
            </div>
        </div>
        
        <!-- 새로운 고급 기능 데모 -->
        <div class="demo-section">
            <h3>🚀 고급 기능 데모</h3>
            <div class="controls">
                <button onclick="advancedMarkDemo()">🎨 고급 mark (배열 + 옵션)</button>
                <button onclick="advancedPressDemo()">⚡ 고급 press (배열 + 옵션)</button>
                <button onclick="eventListenerDemo()">📡 이벤트 리스너 테스트</button>
                <button onclick="hideKeyboardDemo()">👻 키보드 숨기기 옵션</button>
            </div>
        </div>
        
        <!-- 키 숨김/복구 기능 데모 -->
        <div class="demo-section">
            <h3>🎭 키 숨김/복구 기능</h3>
            <div class="controls">
                <button onclick="hideKeysDemo()">🙈 키 숨김 (hide)</button>
                <button onclick="showKeysDemo()">👁️ 키 보이기 (show)</button>
                <button onclick="resetKeysDemo()">♾️ 전체 초기화 (reset)</button>
                <button onclick="selectiveResetDemo()">🎯 선택적 초기화</button>
                <button onclick="dynamicHideShowDemo()">🎪 동적 숨김/보이기</button>
            </div>
        </div>
        
        <!-- 미리 정의된 데모들 -->
        <div class="demo-section">
            <h3>🎪 미리 정의된 데모</h3>
            <div class="controls">
                <button onclick="rainbowDemo()">🌈 무지개 키보드</button>
                <button onclick="gamingDemo()">🎮 게이밍 키보드 (WASD)</button>
                <button onclick="typingDemo()">⌨️ 타이핑 시뮬레이션</button>
                <button onclick="functionKeysDemo()">⚙️ 펑션키 하이라이트</button>
            </div>
        </div>
        
        <!-- 키 코드 로깅 데모 섹션 -->
        <div class="demo-section">
            <h3>📝 키 코드 로깅 (전역 이벤트)</h3>
            <p>모든 키의 press/unpress 이벤트를 로그로 확인할 수 있습니다. Left Ctrl vs Right Ctrl 등 코드 차이를 확인하세요!</p>
            <div class="controls">
                <button onclick="startKeyLogging()">🟢 로깅 시작</button>
                <button onclick="stopKeyLogging()">🔴 로깅 중지</button>
                <button onclick="clearKeyLog()">🧹 로그 지우기</button>
            </div>
            <div class="method-example">
// 전역 이벤트 리스너 사용법
kb.onpress((key) => console.log('누름:', key));
kb.onunpress((key) => console.log('떨:', key));
            </div>
            <div id="keyLogContainer" style="margin-top: 15px;">
                <h4>📋 키 로그:</h4>
                <div id="keyLog" style="
                    background: #2c3e50;
                    color: #ecf0f1;
                    padding: 15px;
                    border-radius: 8px;
                    font-family: 'Courier New', monospace;
                    font-size: 13px;
                    line-height: 1.4;
                    max-height: 200px;
                    overflow-y: auto;
                    border: 2px solid #34495e;
                ">
                    로깅을 시작하면 키 이벤트가 여기에 표시됩니다...
                </div>
            </div>
        </div>
        
        <!-- 툴팁 데모 섹션 -->
        <div class="demo-section">
            <h3>💬 툴팁 데모</h3>
            <div class="controls">
                <button onclick="hoverTooltipDemo()">📍 호버 툴팁</button>
                <button onclick="clickTooltipDemo()">👆 클릭 툴팁</button>
                <button onclick="pressTooltipDemo()">👇 프레스 툴팁</button>
                <button onclick="centerTooltipDemo()">🎯 중앙 툴팁</button>
                <button onclick="htmlTooltipDemo()">🎨 HTML 툴팁</button>
                <button onclick="multiTooltipDemo()">📝 다중 툴팁</button>
                <button onclick="clearTooltips()">🗑️ 툴팁 제거</button>
            </div>
        </div>
        
        <!-- 모달 데모 섹션 -->
        <div class="demo-section">
            <h3>🖼️ 다양한 해상도 모달 데모</h3>
            <p>가상 키보드가 다양한 모달 크기에서 적절히 렌더링되는지 확인해보세요!</p>
            <div class="controls">
                <button onclick="openSmallModal()">📱 Small 모달 (300x250)</button>
                <button onclick="openLargeModal()">🖥️ Large 모달 (800x600)</button>
                <button onclick="openHalfScreenModal()">📏 Half-Screen 모달 (세로)</button>
                <button onclick="openFullScreenModal()">🗺️ Full-Screen 모달</button>
                <button onclick="openMultiPanelModal()">🎨 Multi-Panel 모달 (여러 패널)</button>
            </div>
        </div>
        
        <!-- 향상된 Mark 데모 섹션 -->
        <div class="demo-section">
            <h3>✨ 향상된 Mark 데모</h3>
            <div class="controls">
                <button onclick="borderMarkDemo()">📲 테두리 마킹</button>
                <button onclick="shadowMarkDemo()">🌅 그림자 마킹</button>
                <button onclick="combinedMarkDemo()">🎆 조합 마킹</button>
                <button onclick="rainbowMarkDemo()">🌈 레인보우 마킹</button>
                <button onclick="clearMarks()">🌿 모든 마킹 제거</button>
            </div>
        </div>
        
        <!-- 선택적 마킹 제거 데모 -->
        <div class="demo-section">
            <h3>🎯 선택적 마킹 제거</h3>
            <div class="controls">
                <button onclick="selectiveMarkDemo()">🎨 다양한 마킹 적용</button>
                <button onclick="clearSpecificMarks()">🔥 WASD만 제거</button>
                <button onclick="clearNumberMarks()">🔢 숫자만 제거</button>
                <button onclick="clearSingleMark()">🎯 Space만 제거</button>
            </div>
        </div>
        
        <!-- 사용법 안내 -->
        <div class="info-box">
            <h4>📚 사용법</h4>
            <pre class="method-example"><code class="language-javascript">// 1. 키보드 생성
const kb = new KeyBoard('#keyboard-area');

// 2. 키에 색상 적용
kb.mark('a', '#ff6b6b');        // 빨간색
kb.mark('enter', '#4ecdc4');    // 청록색

// 3. 키 누름 제어 (새로운 API!)
kb.click('space', { pressDelay: 300 });  // 누르고 땅 (기존 press 동작)
kb.press('shift');                       // 누른 상태로 유지
kb.unpress('shift');                     // 누름 해제

// 4. 키 시퀀스 실행
kb.flow(['h','e','l','l','o'], {
    delay: 200,      // 키 사이 간격
    pressDelay: 150  // 각 키 누름 지속시간
});

// 5. 툴팁 추가
kb.tooltip('a', { position: 'relative', on: 'hover' }, '키 정보');
kb.tooltip(['w','a','s','d'], { on: 'click' }, 'WASD 이동키');

// 6. 향상된 마킹 (테두리+그림자)
kb.mark('space', {
    backgroundColor: '#ff6b6b',
    borderColor: '#ff5252',
    shadowColor: '#f44336'
});

// 7. 마킹 제거 (선택적)
kb.clearMarks();                   // 모든 마킹 제거
kb.clearMarks('a');                // 특정 키만 제거
kb.clearMarks(['w','a','s','d']);  // 배열 키들만 제거

// 8. 전체 초기화 (마킹+툴팁+숨김+누름상태 등)
kb.reset();

// 9. 키보드 제거
kb.destroy();</code></pre>
        </div>
    </div>

    <script src="keyboard.js"></script>
    <script>
        // 키보드 인스턴스 생성
        let kb;
        
        // 페이지 로드 시 키보드 초기화
        window.addEventListener('DOMContentLoaded', function() {
            kb = new KeyBoard('#keyboard-area');
        });
        
        // 키 색상 변경 데모
        function markDemo() {
            const key = document.getElementById('markKey').value.trim();
            const color = document.getElementById('markColor').value;
            if (key) {
                kb.mark(key, color);
            }
        }
        
        // 색상 초기화
        function clearMarks() {
            kb.clearMarks(); // 마킹만 제거
        }
        
        // 키 클릭 효과 데모 (기존 press 동작)
        function pressDemo() {
            const key = document.getElementById('pressKey').value.trim();
            const delay = parseInt(document.getElementById('pressDelay').value);
            if (key) {
                kb.click(key, { pressDelay: delay });
            }
        }
        
        // 새로운 press/unpress 상태 제어 데모 함수들
        function pressStateDemo() {
            const key = document.getElementById('stateKey').value.trim();
            if (key) {
                kb.press(key, { triggerEvent: true });
                alert(`"${key}" 키가 누른 상태로 유지됩니다. 마우스로 눌러도 떨 수 없습니다!`);
            }
        }
        
        function unpressStateDemo() {
            const key = document.getElementById('stateKey').value.trim();
            if (key) {
                kb.unpress(key, { triggerEvent: true });
                alert(`"${key}" 키의 누름 상태가 해제되었습니다.`);
            }
        }
        
        function clickStateDemo() {
            const key = document.getElementById('stateKey').value.trim();
            if (key) {
                kb.click(key, { pressDelay: 300, triggerEvent: true });
                alert(`"${key}" 키를 일반적인 클릭처럼 누르고 떨었습니다.`);
            }
        }
        
        let toggleState = false;
        function toggleStateDemo() {
            const key = document.getElementById('stateKey').value.trim();
            if (key) {
                if (toggleState) {
                    kb.unpress(key, { triggerEvent: true });
                    alert(`"${key}" 키 누름 해제!`);
                } else {
                    kb.press(key, { triggerEvent: true });
                    alert(`"${key}" 키 누른 상태!`);
                }
                toggleState = !toggleState;
            }
        }
        
        // 키 코드 로깅 데모 함수들
        let isKeyLoggingActive = false;
        let keyLogCount = 0;
        
        function startKeyLogging() {
            if (isKeyLoggingActive) {
                alert('이미 로깅이 시작되었습니다!');
                return;
            }
            
            isKeyLoggingActive = true;
            keyLogCount = 0;
            
            // 전역 이벤트 리스너 등록
            kb.onpress((key, element) => {
                if (isKeyLoggingActive) {
                    logKeyEvent('PRESS', key, element);
                }
            });
            
            kb.onunpress((key, element) => {
                if (isKeyLoggingActive) {
                    logKeyEvent('UNPRESS', key, element);
                }
            });
            
            // 로그 초기화 및 시작 메시지
            const logElement = document.getElementById('keyLog');
            logElement.innerHTML = `
                <div style="color: #2ecc71; font-weight: bold;">
                    🟢 키 로깅 시작! 키보드를 눌러보세요.
                    <span style="color: #95a5a6;">(시간: ${new Date().toLocaleTimeString()})</span>
                </div>
                <hr style="border: 1px solid #34495e; margin: 10px 0;">
            `;
            
            alert('키 로깅이 시작되었습니다! 이제 키보드를 눌러보세요.');
        }
        
        function stopKeyLogging() {
            if (!isKeyLoggingActive) {
                alert('로깅이 시작되지 않았습니다!');
                return;
            }
            
            isKeyLoggingActive = false;
            
            const logElement = document.getElementById('keyLog');
            logElement.innerHTML += `
                <hr style="border: 1px solid #34495e; margin: 10px 0;">
                <div style="color: #e74c3c; font-weight: bold;">
                    🔴 키 로깅 중지! 총 ${keyLogCount}개 이벤트 기록됨.
                    <span style="color: #95a5a6;">(시간: ${new Date().toLocaleTimeString()})</span>
                </div>
            `;
            
            alert(`키 로깅이 중지되었습니다. 총 ${keyLogCount}개 이벤트가 기록되었습니다.`);
        }
        
        function clearKeyLog() {
            const logElement = document.getElementById('keyLog');
            logElement.innerHTML = '로깅을 시작하면 키 이벤트가 여기에 표시됩니다...';
            keyLogCount = 0;
            alert('로그가 지워졌습니다.');
        }
        
        function logKeyEvent(eventType, key, element) {
            keyLogCount++;
            const timestamp = new Date().toLocaleTimeString();
            
            // 키 정보 추출
            const keyCode = element ? element.dataset.code : 'unknown';
            const keyName = key;
            
            // 색상 설정
            const eventColor = eventType === 'PRESS' ? '#3498db' : '#f39c12';
            const eventIcon = eventType === 'PRESS' ? '↓' : '↑';
            
            const logElement = document.getElementById('keyLog');
            
            // 로그 엔트리 생성
            const logEntry = `
                <div style="margin: 5px 0; padding: 8px; background: rgba(52, 73, 94, 0.3); border-radius: 4px; border-left: 3px solid ${eventColor};">
                    <span style="color: ${eventColor}; font-weight: bold;">${eventIcon} ${eventType}</span>
                    <span style="color: #ecf0f1; margin-left: 10px;">
                        Key: <span style="color: #f1c40f; font-weight: bold;">'${keyName}'</span>
                    </span>
                    <span style="color: #ecf0f1; margin-left: 10px;">
                        Code: <span style="color: #e67e22; font-weight: bold;">${keyCode}</span>
                    </span>
                    <span style="color: #95a5a6; margin-left: 10px; font-size: 11px;">[${timestamp}]</span>
                </div>
            `;
            
            logElement.innerHTML += logEntry;
            
            // 자동 스크롤 (최신 로그를 보이도록)
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // 키 시퀀스 데모
        function flowDemo() {
            const keysStr = document.getElementById('flowKeys').value.trim();
            const delay = parseInt(document.getElementById('flowDelay').value);
            if (keysStr) {
                const keys = keysStr.split(',').map(k => k.trim());
                kb.flow(keys, { delay: delay, pressDelay: 200 });
            }
        }
        
        // 미리 정의된 키 시퀀스
        function flowPresetDemo(preset) {
            const presets = {
                'hello': ['h','e','l','l','o'],
                'keyboard': ['k','e','y','b','o','a','r','d']
            };
            
            if (presets[preset]) {
                kb.flow(presets[preset], { delay: 250, pressDelay: 150 });
            }
        }
        
        // 무지개 키보드 데모
        function rainbowDemo() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
            const letters = ['q','w','e','r','t','y','u','i','o','p','a','s','d','f','g','h','j','k','l','z','x','c','v','b','n','m'];
            
            letters.forEach((letter, index) => {
                setTimeout(() => {
                    kb.mark(letter, colors[index % colors.length]);
                }, index * 100);
            });
        }
        
        // 게이밍 키보드 데모 (WASD + 스페이스)
        function gamingDemo() {
            clearMarks();
            const gamingKeys = [
                { key: 'w', color: '#00ff00' },
                { key: 'a', color: '#00ff00' },
                { key: 's', color: '#00ff00' },
                { key: 'd', color: '#00ff00' },
                { key: 'space', color: '#ff0000' },
                { key: 'shift', color: '#ffff00' },
                { key: 'ctrl', color: '#ffff00' }
            ];
            
            gamingKeys.forEach((item, index) => {
                setTimeout(() => {
                    kb.mark(item.key, item.color);
                }, index * 150);
            });
        }
        
        // 타이핑 시뮬레이션
        function typingDemo() {
            const text = "keyboard.js";
            const keys = text.split('');
            
            clearMarks();
            kb.flow(keys, { delay: 200, pressDelay: 150 });
        }
        
        // 펑션키 하이라이트
        function functionKeysDemo() {
            kb.clearMarks();
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8', '#ffb3ba', '#ffdfba', '#ffffba', '#baffc9', '#bae1ff'];
            
            for (let i = 1; i <= 12; i++) {
                const key = 'f' + i;
                const color = colors[(i - 1) % colors.length];
                setTimeout(() => {
                    kb.mark(key, color);
                    kb.press(key, 100);
                }, i * 100);
            }
        }
        
        // 툴팁 데모 함수들
        function hoverTooltipDemo() {
            clearTooltips();
            kb.tooltip('w', { position: 'relative', on: 'hover' }, 'WASD 이동: 앞으로');
            kb.tooltip('a', { position: 'relative', on: 'hover' }, 'WASD 이동: 왼쪽');
            kb.tooltip('s', { position: 'relative', on: 'hover' }, 'WASD 이동: 뒤로');
            kb.tooltip('d', { position: 'relative', on: 'hover' }, 'WASD 이동: 오른쪽');
            alert('W, A, S, D 키에 마우스를 올려보세요!');
        }
        
        function clickTooltipDemo() {
            clearTooltips();
            kb.tooltip(['enter', 'space', 'shift'], { position: 'relative', on: 'click' }, '클릭하면 닫을 수 있습니다!');
            alert('Enter, Space, Shift 키를 클릭해보세요!');
        }
        
        function pressTooltipDemo() {
            clearTooltips();
            kb.tooltip(['q', 'e', 'r'], { position: 'relative', on: 'press' }, '키를 누르는 동안만 표시됩니다');
            alert('Q, E, R 키를 눌러보세요!');
        }
        
        function centerTooltipDemo() {
            clearTooltips();
            kb.tooltip('ESC', { position: 'center', on: 'click' }, '<h3>중앙 툴팁</h3><p>화면 중앙에 표시되는 큰 툴팁입니다.</p>');
            alert('ESC 키를 클릭해보세요!');
        }
        
        function htmlTooltipDemo() {
            clearTooltips();
            const htmlContent = `
                <div style="text-align: center;">
                    <h4 style="margin: 0 0 8px 0; color: #007bff;">🚀 HTML 툴팁</h4>
                    <p style="margin: 0 0 8px 0;">HTML과 CSS를 사용할 수 있습니다!</p>
                    <div style="background: linear-gradient(45deg, #ff6b6b, #4ecdc4); padding: 5px; border-radius: 3px; color: white; font-weight: bold;">스타일 적용 가능</div>
                </div>
            `;
            kb.tooltip('tab', { position: 'relative', on: 'hover' }, htmlContent);
            alert('Tab 키에 마우스를 올려보세요!');
        }
        
        function multiTooltipDemo() {
            clearTooltips();
            const keys = ['1', '2', '3', '4', '5'];
            keys.forEach((key, index) => {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7'];
                const content = `<div style="color: ${colors[index]}; font-weight: bold;">숫자 ${key} 키</div>`;
                kb.tooltip(key, { position: 'relative', on: 'hover' }, content);
            });
            alert('숫자 1-5 키에 마우스를 올려보세요!');
        }
        
        function clearTooltips() {
            // 모든 키의 툴팁을 제거하기 위해 reset 사용
            kb.reset();
        }
        
        // 향상된 Mark 데모 함수들
        function borderMarkDemo() {
            kb.clearMarks();
            // 테두리 마킹 데모
            kb.mark('w', { backgroundColor: '#e74c3c', borderColor: '#c0392b' });
            kb.mark('a', { backgroundColor: '#3498db', borderColor: '#2980b9' });
            kb.mark('s', { backgroundColor: '#2ecc71', borderColor: '#27ae60' });
            kb.mark('d', { backgroundColor: '#f39c12', borderColor: '#e67e22' });
            alert('WASD 키에 테두리 효과가 적용되었습니다!');
        }
        
        function shadowMarkDemo() {
            kb.clearMarks();
            // 그림자 마킹 데모
            kb.mark(['q', 'w', 'e'], { 
                backgroundColor: '#9b59b6', 
                shadowColor: '#8e44ad'
            });
            kb.mark(['a', 's', 'd'], { 
                backgroundColor: '#e67e22', 
                shadowColor: '#d35400'
            });
            alert('Q,W,E와 A,S,D 키에 그림자 효과가 적용되었습니다!');
        }
        
        function combinedMarkDemo() {
            kb.clearMarks();
            // 조합 마킹 데모 (배경+테두리+그림자)
            kb.mark('space', {
                backgroundColor: '#ff6b6b',
                color: 'white',
                borderColor: '#ff5252',
                shadowColor: '#ff1744'
            });
            kb.mark('enter', {
                backgroundColor: '#4ecdc4',
                color: 'white',
                borderColor: '#26a69a',
                shadowColor: '#00695c'
            });
            kb.mark(['shift'], {
                backgroundColor: '#ffd54f',
                color: '#333',
                borderColor: '#ffb300',
                shadowColor: '#ff8f00'
            });
            alert('Space, Enter, Shift 키에 전체 조합 효과가 적용되었습니다!');
        }
        
        function rainbowMarkDemo() {
            kb.clearMarks();
            // 레인보우 마킹 데모
            const rainbowKeys = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
            const rainbowColors = [
                { bg: '#ff6b6b', border: '#ff5252', shadow: '#f44336' }, // 빨간
                { bg: '#ff9500', border: '#ff8f00', shadow: '#ff6f00' }, // 주황
                { bg: '#ffd54f', border: '#ffb300', shadow: '#ff8f00' }, // 노랑
                { bg: '#66bb6a', border: '#4caf50', shadow: '#388e3c' }, // 초록
                { bg: '#42a5f5', border: '#2196f3', shadow: '#1976d2' }, // 파랑
                { bg: '#5c6bc0', border: '#3f51b5', shadow: '#303f9f' }, // 남색
                { bg: '#ab47bc', border: '#9c27b0', shadow: '#7b1fa2' }, // 보라
                { bg: '#ec407a', border: '#e91e63', shadow: '#c2185b' }, // 분홍
                { bg: '#26a69a', border: '#009688', shadow: '#00695c' }, // 청록
                { bg: '#8d6e63', border: '#795548', shadow: '#5d4037' }  // 갈색
            ];
            
            rainbowKeys.forEach((key, index) => {
                const colors = rainbowColors[index];
                setTimeout(() => {
                    kb.mark(key, {
                        backgroundColor: colors.bg,
                        borderColor: colors.border,
                        shadowColor: colors.shadow,
                        color: 'white'
                    });
                }, index * 100);
            });
            
            alert('숫자 키에 레인보우 효과가 순차적으로 적용됩니다!');
        }
        
        // 선택적 마킹 제거 데모 함수들
        function selectiveMarkDemo() {
            kb.clearMarks();
            // 다양한 마킹 적용
            kb.mark(['w', 'a', 's', 'd'], {
                backgroundColor: '#e74c3c',
                borderColor: '#c0392b',
                shadowColor: '#a93226'
            });
            
            kb.mark(['1', '2', '3', '4', '5'], {
                backgroundColor: '#3498db',
                borderColor: '#2980b9',
                shadowColor: '#1f618d'
            });
            
            kb.mark('space', {
                backgroundColor: '#f39c12',
                borderColor: '#e67e22',
                shadowColor: '#d68910',
                color: 'white'
            });
            
            kb.mark(['q', 'e'], {
                backgroundColor: '#9b59b6',
                shadowColor: '#8e44ad'
            });
            
            alert('다양한 그룹의 키들에 서로 다른 마킹이 적용되었습니다!');
        }
        
        function clearSpecificMarks() {
            // WASD 키만 마킹 제거
            kb.clearMarks(['w', 'a', 's', 'd']);
            alert('WASD 키의 마킹만 제거되었습니다!');
        }
        
        function clearNumberMarks() {
            // 숫자 키만 마킹 제거
            kb.clearMarks(['1', '2', '3', '4', '5']);
            alert('숫자 키의 마킹만 제거되었습니다!');
        }
        
        function clearSingleMark() {
            // Space 키만 마킹 제거
            kb.clearMarks('space');
            alert('Space 키의 마킹만 제거되었습니다!');
        }
        
        // 고급 mark 데모 (배열 + 옵션)
        function advancedMarkDemo() {
            clearMarks();
            
            // 배열로 여러 키 동시에 마킹
            kb.mark(['q', 'w', 'e', 'r'], {
                backgroundColor: '#e74c3c',
                color: '#ffffff'
            });
            
            // 다른 색상으로 다른 키들 마킹
            setTimeout(() => {
                kb.mark(['a', 's', 'd', 'f'], {
                    backgroundColor: '#2ecc71',
                    color: '#000000'
                });
            }, 500);
            
            // 기본 색상으로 마킹 (자동 대비색)
            setTimeout(() => {
                kb.mark(['z', 'x', 'c', 'v']);
            }, 1000);
        }
        
        // 고급 press 데모 (배열 + 옵션)
        function advancedPressDemo() {
            // 여러 키 동시에 누름 효과
            kb.press(['1', '2', '3', '4', '5'], {
                pressDelay: 800,
                triggerEvent: true
            });
            
            // 연속으로 다른 키들 누름
            setTimeout(() => {
                kb.press(['q', 'w', 'e', 'r', 't'], {
                    pressDelay: 400
                });
            }, 1000);
        }
        
        // 이벤트 리스너 데모
        function eventListenerDemo() {
            clearMarks();
            
            // 'a' 키에 이벤트 리스너 등록
            kb.onpress('a', function(key, element) {
                console.log(`키 '${key}' 가 눌렸습니다!`);
                alert(`키 '${key}' 가 눌렸습니다! (콘솔에서도 확인하세요)`);
            });
            
            kb.onunpress('a', function(key, element) {
                console.log(`키 '${key}' 가 떼어졌습니다!`);
            });
            
            // 's' 키에도 이벤트 리스너 등록
            kb.onpress('s', function(key, element) {
                element.style.backgroundColor = '#f39c12';
                element.style.transform = 'scale(1.1)';
            });
            
            kb.onunpress('s', function(key, element) {
                element.style.backgroundColor = '';
                element.style.transform = '';
            });
            
            // 안내 마킹
            kb.mark(['a', 's'], {
                backgroundColor: '#3498db',
                color: '#ffffff'
            });
            
            alert('a키와 s키를 클릭해보세요! 이벤트가 발생합니다.');
        }
        
        // 키보드 숨기기 옵션 데모
        function hideKeyboardDemo() {
            // 기존 키보드 제거
            if (kb) {
                kb.destroy();
            }
            
            // 옵션 선택 창
            const options = {
                hiddenEscape: confirm('ESC 키를 숨기시겠습니까?'),
                hiddenFuntion: confirm('펑션키(F1~F12)를 숨기시겠습니까?'),
                hiddenArrow: confirm('방향키를 숨기시겠습니까?')
            };
            
            // 새로운 키보드 생성
            kb = new KeyBoard('#keyboard-area', options);
            
            alert('키보드가 선택한 옵션에 따라 재생성되었습니다!');
        }
        
        // 키 숨김 데모
        function hideKeysDemo() {
            // 여러 키를 배열로 숨김
            kb.hide(['q', 'w', 'e', 'r', 't']);
            
            // 다른 키들도 숨김
            setTimeout(() => {
                kb.hide(['1', '2', '3', '4', '5']);
            }, 500);
            
            // 단일 키 숨김
            setTimeout(() => {
                kb.hide('space');
                kb.hide('enter');
            }, 1000);
            
            alert('여러 키들이 숨겨졌습니다! 배열 위치는 유지되고 단순히 보이지 않습니다.');
        }
        
        // 키 보이기 데모
        function showKeysDemo() {
            // 숨겨진 키들을 다시 보이기
            kb.show(['q', 'w', 'e', 'r', 't']);
            
            setTimeout(() => {
                kb.show(['1', '2', '3', '4', '5']);
            }, 300);
            
            setTimeout(() => {
                kb.show(['space', 'enter']);
            }, 600);
            
            alert('숨겨진 키들이 다시 나타났습니다!');
        }
        
        // 전체 초기화 데모
        function resetKeysDemo() {
            // 먼저 여러 키를 마킹하고 숨김
            kb.mark(['a', 's', 'd', 'f'], {
                backgroundColor: '#e74c3c',
                color: '#ffffff'
            });
            
            kb.hide(['z', 'x', 'c', 'v']);
            
            // 2초 후 전체 초기화
            setTimeout(() => {
                kb.reset();
                alert('모든 키가 원래 상태로 복구되었습니다! (mark 및 hide 모두 해제)');
            }, 2000);
            
            alert('2초 후 전체가 초기화됩니다. 지금 보이는 마킹과 숨김이 모두 사라집니다.');
        }
        
        // 선택적 초기화 데모
        function selectiveResetDemo() {
            // 여러 그룹의 키들을 다르게 마킹하고 숨김
            
            // 첫 번째 그룹: QWERT 마킹
            kb.mark(['q', 'w', 'e', 'r', 't'], {
                backgroundColor: '#e74c3c',
                color: '#ffffff'
            });
            
            // 두 번째 그룹: ASDF 마킹 및 숨김
            kb.mark(['a', 's', 'd', 'f'], {
                backgroundColor: '#2ecc71',
                color: '#000000'
            });
            kb.hide(['a', 's']);
            
            // 세 번째 그룹: 12345 마킹
            kb.mark(['1', '2', '3', '4', '5'], {
                backgroundColor: '#f39c12',
                color: '#ffffff'
            });
            
            alert('여러 그룹의 키들을 다르게 설정했습니다. 이제 선택적으로 초기화해보겠습니다.');
            
            // 2초 후: QWERT만 초기화
            setTimeout(() => {
                kb.reset(['q', 'w', 'e', 'r', 't']);
                alert('QWERT 키들만 초기화되었습니다. 다른 키들은 그대로 유지됩니다.');
            }, 2000);
            
            // 4초 후: AS 키만 초기화 (숨겨진 키들이 다시 나타남)
            setTimeout(() => {
                kb.reset(['a', 's']);
                alert('A, S 키만 초기화되었습니다. 숨겨졌던 키들이 다시 나타났습니다!');
            }, 4000);
            
            // 6초 후: 단일 키 초기화
            setTimeout(() => {
                kb.reset('1');
                alert('숫자 1 키만 초기화되었습니다. 단일 키도 가능합니다!');
            }, 6000);
            
            // 8초 후: 나머지 전체 초기화
            setTimeout(() => {
                kb.reset();
                alert('마지막으로 나머지 모든 키를 초기화했습니다!');
            }, 8000);
        }
        
        // 동적 숨김/보이기 데모
        function dynamicHideShowDemo() {
            const keys = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p'];
            let currentIndex = 0;
            
            // 반복적으로 키를 숨기고 보이기
            const interval = setInterval(() => {
                const currentKey = keys[currentIndex];
                
                // 키 숨김
                kb.hide(currentKey);
                kb.mark(currentKey, { backgroundColor: '#f39c12' });
                
                // 500ms 후 다시 보이기
                setTimeout(() => {
                    kb.show(currentKey);
                }, 500);
                
                currentIndex++;
                
                // 모든 키를 처리했으면 중지
                if (currentIndex >= keys.length) {
                    clearInterval(interval);
                    setTimeout(() => {
                        clearMarks();
                        alert('동적 숨김/보이기 데모가 종료되었습니다!');
                    }, 1000);
                }
            }, 200);
            
            alert('동적 숨김/보이기 데모가 시작됩니다! 키들이 순차적으로 사라지고 나타납니다.');
        }
        
        // 모달 데모 함수들
        let modalKeyboardInstances = new Map();
        
        function createModal(size, title, description) {
            // 기존 모달 제거
            removeModal();
            
            // 모달 구조 생성
            const modal = document.createElement('div');
            modal.className = `modal-overlay modal-${size}`;
            modal.id = 'demoModal';
            
            modal.innerHTML = `
                <div class="modal-container">
                    <div class="modal-header">
                        <h3 class="modal-title">${title}</h3>
                        <button class="modal-close" onclick="removeModal()">×</button>
                    </div>
                    <div class="modal-content">
                        <div class="modal-info">${description}</div>
                        <div class="modal-keyboard-container" id="modalKeyboardContainer">
                            <!-- 키보드가 여기에 렌더링됩니다 -->
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // 모달 표시 애니메이션
            setTimeout(() => {
                modal.classList.add('active');
            }, 50);
            
            // 모달 외부 클릭 시 닫기
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    removeModal();
                }
            });
            
            // ESC 키로 닫기
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    removeModal();
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
            
            return modal;
        }
        
        function removeModal() {
            // 새로운 모달 구조에 맞게 수정
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.remove();
                    // 모달 키보드 인스턴스 정리
                    modalKeyboardInstances.clear();
                }, 300);
            }
        }
        
        function createModalKeyboard() {
            const container = document.getElementById('modalKeyboardContainer');
            if (!container) return null;
            
            // 새 키보드 인스턴스 생성
            const modalKb = new KeyBoard('#modalKeyboardContainer');
            modalKeyboardInstances.set('current', modalKb);
            
            // 모달 키보드에 간단한 데모 이벤트 추가
            modalKb.onpress((key) => {
                console.log('모달 키보드에서 누름:', key);
            });
            
            // 샘플 마킹 추가
            setTimeout(() => {
                modalKb.mark(['w', 'a', 's', 'd'], {
                    backgroundColor: '#3498db',
                    color: '#ffffff'
                });
                modalKb.mark(['space'], {
                    backgroundColor: '#e74c3c',
                    color: '#ffffff'
                });
            }, 500);
            
            return modalKb;
        }
        
        // 모달 데모 함수들
        function openSmallModal() {
            const modal = createModal('small', '📱 Small 모달', '작은 모달에서의 키보드 렌더링 테스트 (300x250)');
            setTimeout(() => {
                createModalKeyboard();
            }, 400);
        }
        
        function openLargeModal() {
            const modal = createModal('large', '🖥️ Large 모달', '중간 크기 모달에서의 키보드 렌더링 테스트 (800x600)');
            setTimeout(() => {
                createModalKeyboard();
            }, 400);
        }
        
        function openHalfScreenModal() {
            const modal = createModal('half-screen', '📏 Half-Screen 모달', '세로가 긴 모달에서의 키보드 렌더링 테스트 (40vw x 85vh)');
            setTimeout(() => {
                createModalKeyboard();
            }, 400);
        }
        
        function openFullScreenModal() {
            const modal = createModal('full-screen', '🗺️ Full-Screen 모달', '전체 화면 모달에서의 키보드 렌더링 테스트 (95vw x 95vh)');
            setTimeout(() => {
                createModalKeyboard();
            }, 400);
        }
        
        function openTileArtModal() {
            // 타일 아트 모달 열기
            createTileArtModal();
        }
        
        function createTileArtModal() {
            // 기존 모달 제거
            removeModal();
            
            // 모달 오버레이 생성
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay modal-tile-art';
            overlay.innerHTML = `
                <div class="modal-container">
                    <div class="modal-header">
                        <h2 class="modal-title">🎨 타일 아트 멀티 패널</h2>
                        <button class="modal-close" onclick="removeModal()">×</button>
                    </div>
                    <div class="modal-content">
                        <div class="modal-info">🌌 극한 스케일! 초소형부터 초대형까지 - 1x1 micro부터 12x8 massive까지 완전한 크기 스펙트럼으로 KeyBoard 렌더링 한계 테스트</div>
                        <div class="tile-art-grid">
                            <div class="keyboard-panel massive" data-label="Massive (12x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel colossal" data-label="Colossal (10x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel mega-square" data-label="Mega Square (8x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel gigantic" data-label="Gigantic (9x7)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel enormous" data-label="Enormous (8x6)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ultra-tall-max" data-label="Ultra Tall Max (6x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel wide-rect" data-label="Wide Rect (10x5)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel tall-banner" data-label="Tall Banner (5x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ultra-wide-max" data-label="Ultra Wide Max (12x4)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel super-square" data-label="Super Square (6x6)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel tall-rect" data-label="Tall Rect (4x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel wide-banner" data-label="Wide Banner (12x3)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel huge-tall" data-label="Huge Tall (3x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel huge-wide" data-label="Huge Wide (12x2)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel mega-wide" data-label="Mega Wide (12x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel needle" data-label="Needle (1x8)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ultra-thin" data-label="Ultra Thin (1x7)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel skyscraper" data-label="Skyscraper (1x6)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ultra-tall" data-label="Ultra Tall (1x5)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel panorama" data-label="Panorama (8x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ribbon" data-label="Ribbon (7x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel super-wide" data-label="Super Wide (6x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel ultra-wide" data-label="Ultra Wide (5x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel micro" data-label="Micro (1x1)">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // 모달 오버레이 이벤트 리스너 (외부 클릭 시 닫기)
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    removeModal();
                }
            });
            
            document.body.appendChild(overlay);
            
            // 애니메이션 효과를 위해 약간 딸레이
            setTimeout(() => {
                overlay.classList.add('active');
            }, 10);
            
            // ESC 키 이벤트 리스너
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    removeModal();
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
            
            // 타일 아트 패널에 키보드 생성
            setTimeout(() => {
                createTileArtKeyboards();
            }, 400);
            
            return overlay;
        }
        
        function createTileArtKeyboards() {
            // .keyboard-panel 클래스를 가진 모든 요소에 키보드 생성
            const panels = document.querySelectorAll('.keyboard-panel');
            
            panels.forEach((panel, index) => {
                // 각 패널에 고유 ID 부여
                panel.id = `tile-art-panel-${index}`;
                
                try {
                    // KeyBoard 인스턴스 생성 (자동 스타일링 테스트)
                    const kb = new KeyBoard(`#tile-art-panel-${index}`);
                    
                    // 각 키보드에 다른 색상의 마킹 적용
                    const colorPalettes = [
                        { bg: '#e74c3c', color: '#ffffff' }, // 빨간
                        { bg: '#3498db', color: '#ffffff' }, // 파란
                        { bg: '#2ecc71', color: '#ffffff' }, // 초록
                        { bg: '#f39c12', color: '#ffffff' }, // 주황
                        { bg: '#9b59b6', color: '#ffffff' }, // 보라
                        { bg: '#1abc9c', color: '#ffffff' }, // 에메랄드
                        { bg: '#e67e22', color: '#ffffff' }, // 캐럿
                        { bg: '#34495e', color: '#ffffff' }, // 어둠운 파란
                        { bg: '#d35400', color: '#ffffff' }, // 펌킨
                        { bg: '#c0392b', color: '#ffffff' }, // 진한 빨간
                        { bg: '#8e44ad', color: '#ffffff' }, // 우아한 보라
                        { bg: '#27ae60', color: '#ffffff' }, // 녹색
                        { bg: '#2980b9', color: '#ffffff' }, // 다크 블루
                        { bg: '#f1c40f', color: '#2c3e50' }  // 노란
                    ];
                    
                    const colorSet = colorPalettes[index % colorPalettes.length];
                    
                    setTimeout(() => {
                        // 각 키보드에 다른 키 조합 마킹
                        const keyPatterns = [
                            ['q', 'w', 'e', 'r'], // QWER
                            ['a', 's', 'd', 'f'], // ASDF
                            ['1', '2', '3', '4'], // 숫자
                            ['z', 'x', 'c', 'v'], // ZXCV
                            ['space'], // 스페이스
                            ['enter', 'backspace'], // 엔터/백스페이스
                            ['ctrl', 'alt'], // 수식어 키
                            ['f1', 'f2', 'f3'], // 펌션 키
                            ['tab', 'capslock'], // 탭/캐스락
                            ['shift'], // 시프트
                            ['t', 'y', 'u', 'i'], // TYUI
                            ['g', 'h', 'j', 'k'], // GHJK
                            ['5', '6', '7', '8'], // 숫자 2
                            ['b', 'n', 'm'] // BNM
                        ];
                        
                        const keyPattern = keyPatterns[index % keyPatterns.length];
                        kb.mark(keyPattern, colorSet);
                        
                        // 전역 이벤트 리스너 추가 (콘솔 로깅)
                        kb.onpress((key) => {
                            console.log(`타일 패널 ${index + 1} (크기: ${panel.className.match(/\b(tiny|small|medium|wide|tall|large|xlarge|mega|tower|banner|micro|nano|compact|standard)\b/)?.[0] || 'unknown'})에서 키 누름: ${key}`);
                        });
                        
                    }, 500 + (index * 80)); // 순차적 렌더링
                    
                    // 인스턴스 저장
                    modalKeyboardInstances.set(`tile-art-${index}`, kb);
                    
                } catch (error) {
                    console.error(`타일 패널 ${index + 1} 키보드 생성 오류:`, error);
                }
            });
            
            // 완료 메시지 표시
            setTimeout(() => {
                alert(`🎨 타일 아트 모달이 완성되었습니다!\n\n총 ${panels.length}개의 다양한 크기 패널에 키보드가 렌더링되었습니다.\n\nKeyBoard 생성자에서 자동으로 컨테이너 스타일을 적용했습니다.\n\n다양한 크기와 비율의 패널에서 키보드가 어떻게 적응되는지 확인해보세요!`);
            }, 2500);
        }
        
        function openMultiPanelModal() {
            // Multi-Panel 버튼을 타일아트 모달로 매핑
            openTileArtModal();
        }
        
        function openTileArtModalDirect() {
            // 기존 모달 제거
            removeModal();
            
            // 모달 오버레이 생성
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay modal-tile-art';
            overlay.innerHTML = `
                <div class="modal-container">
                    <div class="modal-header">
                        <h2 class="modal-title">🎨 타일 아트 멀티 패널</h2>
                        <button class="modal-close" onclick="removeModal()">×</button>
                    </div>
                    <div class="modal-content">
                        <div class="modal-info">다양한 크기와 비율의 14개 패널 - 타일 예술 작품처럼 배치된 레이아웃에서 KeyBoard 자동 스타일링 테스트</div>
                        <div class="tile-art-grid">
                            <div class="keyboard-panel tiny" data-label="Mini">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel small" data-label="Small">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel medium" data-label="Medium">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel tall" data-label="Tall">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel micro" data-label="Micro">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel tower" data-label="Tower">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel wide" data-label="Wide">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel large" data-label="Large">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel compact" data-label="Compact">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel mega" data-label="Mega">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel banner" data-label="Banner">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel xlarge" data-label="XLarge">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel standard" data-label="Standard">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                            <div class="keyboard-panel nano" data-label="Nano">
                                <!-- 여기에 키보드가 자동으로 렌더링됨 -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // 모달 오버레이 이벤트 리스너 (외부 클릭 시 닫기)
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    removeModal();
                }
            });
            
            document.body.appendChild(overlay);
            
            // 애니메이션 효과를 위해 약간 딸래이
            setTimeout(() => {
                overlay.classList.add('active');
            }, 10);
            
            // ESC 키 이벤트 리스너
            const handleEsc = (e) => {
                if (e.key === 'Escape') {
                    removeModal();
                    document.removeEventListener('keydown', handleEsc);
                }
            };
            document.addEventListener('keydown', handleEsc);
            
            // 타일 아트 패널에 키보드 생성
            setTimeout(() => {
                createTileArtKeyboards();
            }, 400);
        }
        
        function createMultiPanelKeyboards() {
            // .keyboard-panel 클래스를 가진 모든 요소에 키보드 생성
            const panels = document.querySelectorAll('.keyboard-panel');
            
            panels.forEach((panel, index) => {
                // 각 패널에 고유 ID 부여
                panel.id = `keyboard-panel-${index}`;
                
                try {
                    // KeyBoard 인스턴스 생성 (자동 스타일링 테스트)
                    const kb = new KeyBoard(`#keyboard-panel-${index}`);
                    
                    // 각 키보드에 다른 색상의 마킹 적용
                    const colors = [
                        { bg: '#e74c3c', color: '#ffffff' }, // 빨간
                        { bg: '#3498db', color: '#ffffff' }, // 파란
                        { bg: '#2ecc71', color: '#ffffff' }, // 초록
                        { bg: '#f39c12', color: '#ffffff' }, // 주황
                        { bg: '#9b59b6', color: '#ffffff' }  // 보라
                    ];
                    
                    const colorSet = colors[index % colors.length];
                    
                    setTimeout(() => {
                        // 각 키보드에 다른 키 조합 마킹
                        const keyGroups = [
                            ['q', 'w', 'e', 'r'],
                            ['a', 's', 'd', 'f'],
                            ['1', '2', '3', '4'],
                            ['z', 'x', 'c', 'v'],
                            ['space', 'enter']
                        ];
                        
                        const keyGroup = keyGroups[index % keyGroups.length];
                        kb.mark(keyGroup, colorSet);
                        
                        // 전역 이벤트 리스너 추가 (콘솔 로깅)
                        kb.onpress((key) => {
                            console.log(`패널 ${index + 1}에서 키 누름: ${key}`);
                        });
                        
                    }, 500 + (index * 100)); // 순차적 렌더링
                    
                    // 인스턴스 저장
                    modalKeyboardInstances.set(`panel-${index}`, kb);
                    
                } catch (error) {
                    console.error(`패널 ${index + 1} 키보드 생성 오류:`, error);
                }
            });
            
            // 메시지 표시
            setTimeout(() => {
                alert(`총 ${panels.length}개 패널에 키보드가 렌더링되었습니다!\n\nKeyBoard 생성자에서 자동으로 컨테이너 스타일을 적용했습니다.\n\n다양한 크기의 패널에서 키보드가 어떻게 적응되는지 확인해보세요!`);
            }, 2000);
        }
    </script>
</body>
</html>
 